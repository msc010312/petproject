<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- link -->
    <script src="/js/link.js" defer></script>
    <title>Document</title>
    <!-- css -->
    <link th:href="@{/css/style.css}" rel="stylesheet"/>
    <link th:href="@{/css/header.css}" rel="stylesheet"/>
    <link th:href="@{/css/footer.css}" rel="stylesheet"/>
    <link th:href="@{/css/ownerpage.css}" rel="stylesheet"/>
    <!-- JS -->
    <script th:src="@{/js/ownerpage.js}" defer></script>
    <script th:inline="javascript">
        let ownerId = [[${owner.ownerId}]];
    </script>

    <!-- goole icon -->
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
</head>

<body>
<div class="wrapper">
    <!-- 헤더영역 (템플릿화 예정) -->
    <div class="header">
        <div class="logo">
            <span><a href="#">LOGO</a></span>
        </div>
        <div class="menu">
            <ul>
                <li class="menu-service">
                    <a href="#">Service</a>
                    <ul class="sub-menu">
                        <li class="sub-item"><a href="#">Day Care</a></li>
                        <li class="sub-item"><a href="#">Hotelling</a></li>
                        <li class="sub-item"><a href="#">work with pet</a></li>
                    </ul>
                </li>
                <li><a href="#">place</a></li>
                <li><a href="#">board</a></li>
            </ul>
        </div>
        <div class="sign">
            <button class="sign-in btn">
                <a href="../sign/login.html">로그인</a>
            </button>
            <button class="sign-up btn">
                <a href="../sign/signup.html">회원가입</a>
            </button>
        </div>
    </div>
    <!-- 메인영역 -->
    <div class="main">
        <!-- pagew 1260px -->
        <div class="pagew">
            <!-- 작업 영역 -->
            <div class="content">
                <!-- chart1 -->
                <div class="produce">
                    <div class="name">
                        <img src="/asset/dog1.jpg"/>
                        <span th:text="'안녕하세요,' + ${owner.user.name} + '님!'"></span>
                        <ul>
                            <li>오늘도 반려견과 행복한 하루 되세요</li>
                        </ul>
                    </div>
                    <div class="pet">
                <span class="material-symbols-outlined" style="font-size: 15px">
                  pets
                </span>
                        <span>반려동물 : 2마리</span>
                    </div>
                    <div class="review">
                <span class="material-symbols-outlined" style="font-size: 16px">
                  star
                </span>
                        <span>작성한 리뷰 : 6건</span>
                    </div>
                    <div class="reserving">
                <span class="material-symbols-outlined" style="font-size: 15px">
                  calendar_today
                </span>
                        <span>진행중인 예약 : 3건</span>
                    </div>
                    <div class="payment-amount">
                <span class="material-symbols-outlined" style="font-size: 15px">
                  credit_card
                </span>
                        <span th:text="'누적 이용 금액 : ' + ${owner.totalPayment}"></span>
                    </div>
                    <div class="btn">
                        <div class="pro-setting">
                            <a th:href="@{/mypage/ownerprofile}">프로필 관리</a>
                        </div>
                        <div class="pay-amount">
                            <!-- 모달 버튼 -->
                            <button class="modal-btn" data-type="pay" th:text="${owner.totalPayment}">결제 내역</button>
                        </div>
                    </div>
                    <!-- chart2 -->
                </div>
                <div class="reserve">
                    <div class="reserv">
                        <span>진행중인 예약</span>
                        <ul>
                            <li>현재 진행 중이거나 예정된 예약 내역입니다.</li>
                        </ul>
                    </div>
                    <!-- 페이지 1 -->
                    <div th:each="reserve:${reservations}" class="resev-page" data-page="1">
                        <div class="res-card">
                            <ul>
                                <span class="type" th:text="${reserve.serviceType}"></span>
                                <span class="status" th:text="${reserve.status}"></span>
                            </ul>
                            <div class="schedule">
                                <span class="material-symbols-outlined">calendar_today</span>
                                <span th:text="${reserve.date}"></span>
                            </div>
                            <div class="sit" th:text="${reserve.sitter.user.name} + '시터'"></div>
                            <div class="price" th:text="${reserve.payment}">120,000원</div>
                            <div class="actions">
                                <button class="openChatBtn">채팅</button>
                                <button class="modal-btn" data-type="view1">상세보기</button>
                            </div>
                        </div>
                        <!-- 페이지네이션 -->
                        <div class="allres">
                            <button th:if="${currentPage > 0}"
                                    th:onclick="location.href=\'items?page=' + ${currentPage -1} + '\'">
                                <span class="left material-symbols-outlined">chevron_left</span>
                            </button>
                            <ul class="number">
                                <div th:each="pageNum : ${#numbers.sequence(0, totalPages != null ? totalPages - 1 : 0)}">
                                    <button class="page-btn" th:text="${pageNum + 1}"
                                            th:classappend="${pageNum == currentPage ? 'active' : ''}"
                                            th:onclick="location.href='items?page=' + ${pageNum}"></button>
                                </div>
                            </ul>
                            <button th:if="${totalPages != null and currentPage < totalPages -1}"
                                    th:onclick="location.href=\'items?page=' + ${currentPage +1} + '\'">
                                <span class="right material-symbols-outlined">chevron_right</span>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- chart3 -->
                <div class="all-pro">
                    <div class="profil">
                        <div class="pet-prof">
                            <span>반려동물 프로필</span>
                            <ul>
                                <li>등록된 반려동물 정보입니다.</li>
                            </ul>
                            <div class="care">
                                <button class="modal-btn" data-type="petInfo">관리</button>
                            </div>
                        </div>
                    </div>
                    <div class="sitter">
                        <div class="sit-used">
                            <span>최근 이용한 시터</span>
                            <ul>
                                <li>최근에 이용한 펫시터 목록입니다.</li>
                            </ul>
                        </div>
                        <div th:each="res : ${reservations}">
                            <div class="reservation-item">
                                <span th:if="${res.sitter != null}"
                                      th:text="'이름 : ' + ${res.sitter.user.name}"></span><br>
                                <span th:text="'서비스 : ' + ${res.serviceType}"></span><br>
                                <span th:text="'날짜 : ' + ${res.date}"></span>
                            </div>
                        </div>
                        <div class="chat1">
                            <!-- 모달 버튼 -->
                            <button class="openChatBtn" data-sitter="sitter3">
                                채팅
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 기본 모달 -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeBtn">&times;</span>
            <div id="modalContentBody">
                <p>기본 모달 내용</p>
            </div>
        </div>
    </div>
    <!-- 채팅 모달 -->
    <div id="chatModal" class="chat-modal">
        <div class="chat-box">
            <div class="chat-header">
                <span id="chatWith">채팅</span>
                <span id="closeChatBtn" class="close">&times;</span>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input">
                <input
                        type="text"
                        id="chatInput"
                        placeholder="메시지를 입력하세요"
                />
                <button id="sendBtn">전송</button>
            </div>
        </div>
    </div>
    <!-- footer영역(템플릿화 예정) -->
    <div class="footer">
        <span>footer</span>
    </div>
</div>
</body>
</html>
